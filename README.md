# vue-shop

Интернет-магазин на Vue 3 с бэкендом на Java Spring Boot.

## Описание системы

Система "Vue Shop" (bikeON) представляет собой веб-приложение для автоматизации процесса продажи велосипедов в интернет-магазине. Система предоставляет удобный и интуитивно понятный интерфейс для просмотра каталога товаров, управления избранным и формирования заказов.

Основные возможности системы:

- **Для покупателей:**

  - Просмотр каталога велосипедов с изображениями, названиями и ценами
  - Поиск товаров по названию с поддержкой частичного совпадения
  - Сортировка товаров по названию, цене (по возрастанию и убыванию)
  - Добавление товаров в избранное для быстрого доступа
  - Формирование корзины покупок с отображением общей стоимости
  - Просмотр детальной информации о товарах

- **Для администраторов:**
  - Управление каталогом товаров через REST API
  - Инициализация начальных данных при первом запуске
  - Мониторинг популярных товаров через статистику избранного

Поддерживаемые функции:

- **Каталог товаров** - отображение всех доступных велосипедов с возможностью фильтрации и сортировки
- **Избранное** - сохранение понравившихся товаров на сервере для последующего просмотра
- **Корзина покупок** - временное хранение выбранных товаров с автоматическим подсчетом общей стоимости
- **Поиск** - быстрый поиск товаров по названию с регистронезависимым поиском
- **Сортировка** - упорядочивание товаров по различным критериям (название, цена)

Системные требования:

- **Веб-браузер:** Google Chrome 90+, Mozilla Firefox 88+, Safari 14+, Microsoft Edge 90+
- **Доступ к сети Интернет** (для работы с REST API)
- **Разрешение экрана:** не менее 1280×720 пикселей для оптимального отображения интерфейса
- **JavaScript:** должен быть включен в браузере

Для начала работы с системой необходимо:

1. **Запустить систему через Docker (рекомендуемый способ):**

   - Открыть терминал в корневой директории проекта
   - Выполнить команду: `docker compose up --build`
   - Дождаться запуска всех сервисов (PostgreSQL, бэкенд, фронтенд)

2. **Открыть веб-браузер**

3. **Перейти по адресу:** `http://localhost:4173` - для доступа к интерфейсу магазина

   В дальнейшем при выпуске этого веб-приложения в продакшен можно будет переходить по его адресу в сети.

4. **Альтернативный способ (ручной запуск):**
   - Запустить PostgreSQL (локально или через Docker)
   - Запустить бэкенд: `cd backend && mvn spring-boot:run`
   - Запустить фронтенд: `npm run dev`
   - Открыть браузер и перейти по адресу, указанному в терминале (обычно `http://localhost:5173`)

**Примечание:** При первом запуске система автоматически инициализирует базу данных с 10 примерами велосипедов для демонстрации функциональности.

## Руководство пользователя

### Решение возможных проблем

- **При сообщении "Не удается получить доступ к сайту"** проверьте, что все сервисы запущены (PostgreSQL, бэкенд, фронтенд) и доступны по указанным адресам

- **При ошибке соединения с API** убедитесь в наличии интернет-соединения и правильности настройки `VITE_API_BASE_URL` (по умолчанию `http://localhost:8080`)

- **При отсутствии товаров в каталоге** проверьте, что база данных инициализирована (при первом запуске данные добавляются автоматически)

- **При постоянных ошибках** обратитесь к администратору системы или проверьте логи контейнеров Docker

### Интерфейс главной страницы

После успешного открытия приложения пользователь попадает на главную страницу магазина, которая содержит:

**Шапка сайта (Header):**

- Логотип и название магазина "bikeON"
- Иконка корзины с отображением общей стоимости выбранных товаров
- Иконка избранного (закладки)
- Иконка профиля (для будущего функционала)

**Блок управления каталогом:**

- Заголовок "Все велосипеды"
- Выпадающий список сортировки товаров
- Поле поиска товаров по названию

**Каталог товаров:**

- Сетка карточек товаров (4 колонки)
- Каждая карточка содержит:
  - Изображение велосипеда
  - Название товара
  - Цену в рублях
  - Иконку избранного (сердце) в левом верхнем углу
  - Кнопку добавления в корзину (плюс/галочка) в правом нижнем углу

### Работа с каталогом товаров

**Для просмотра товаров:**

1. Откройте главную страницу магазина
2. На странице автоматически отобразится каталог всех доступных велосипедов
3. Каждая карточка товара содержит изображение, название и цену

**Функции сортировки:**

- Используйте выпадающий список в правом верхнем углу для выбора способа сортировки:
  - **"По названию"** - сортировка товаров в алфавитном порядке по названию
  - **"Сначала дешевые"** - сортировка по цене от меньшей к большей
  - **"Сначала дорогие"** - сортировка по цене от большей к меньшей
- Список товаров обновляется автоматически после выбора опции сортировки

**Функции поиска:**

1. Введите текст в поле поиска (иконка лупы)
2. Система автоматически найдет товары, в названии которых содержится введенный текст
3. Поиск работает без учета регистра (можно вводить как заглавными, так и строчными буквами)
4. Для отмены поиска очистите поле ввода

**Особенности поиска:**

- Поиск выполняется в реальном времени при вводе текста
- Поддерживается частичное совпадение (не обязательно вводить полное название)
- При отсутствии результатов список товаров будет пустым

### Работа с избранным

**Для добавления товара в избранное:**

1. Найдите нужный товар в каталоге
2. Нажмите на иконку сердца в левом верхнем углу карточки товара
3. Иконка изменит цвет, что означает успешное добавление в избранное
4. Товар сохраняется на сервере и будет доступен при следующем посещении

**Для удаления товара из избранного:**

1. Найдите товар, который уже находится в избранном (иконка сердца заполнена)
2. Нажмите на иконку сердца повторно
3. Иконка вернется в исходное состояние, товар будет удален из избранного

**Особенности работы с избранным:**

- Избранное сохраняется на сервере и синхронизируется при каждой загрузке страницы
- Можно добавлять и удалять товары из избранного неограниченное количество раз
- Состояние избранного отображается сразу после загрузки каталога

### Работа с корзиной покупок

**Для добавления товара в корзину:**

1. Найдите нужный товар в каталоге
2. Нажмите на иконку плюса (+) в правом нижнем углу карточки товара
3. Иконка изменится на галочку (✓), что означает успешное добавление в корзину
4. Общая стоимость корзины автоматически обновится в шапке сайта

**Для просмотра корзины:**

1. Нажмите на иконку корзины в шапке сайта (или на сумму в рублях)
2. Откроется боковая панель корзины справа
3. В корзине отображаются:
   - Список всех добавленных товаров
   - Количество каждого товара
   - Общая стоимость всех товаров

**Для удаления товара из корзины:**

1. Откройте корзину, нажав на иконку корзины в шапке
2. Найдите товар, который нужно удалить
3. Нажмите на кнопку удаления рядом с товаром
4. Товар будет удален из корзины, общая стоимость обновится автоматически

**Альтернативный способ удаления:**

1. Найдите товар в каталоге, который уже добавлен в корзину (иконка галочки)
2. Нажмите на иконку галочки повторно
3. Товар будет удален из корзины, иконка вернется в состояние плюса

**Особенности работы с корзиной:**

- Корзина хранится только в браузере (не сохраняется на сервере)
- При обновлении страницы корзина очищается
- Общая стоимость рассчитывается автоматически и отображается в реальном времени
- Кнопка "Оформить заказ" доступна, но функционал оформления заказа находится в разработке

**Расчет общей стоимости:**

- Система автоматически суммирует цены всех товаров в корзине
- Общая стоимость отображается в шапке сайта и в боковой панели корзины
- При добавлении или удалении товаров стоимость обновляется мгновенно

### Последовательность действий при покупке

1. **Просмотр каталога**

   - Откройте главную страницу магазина
   - Используйте поиск и сортировку для удобного поиска нужных товаров

2. **Выбор товаров**

   - Просмотрите карточки товаров с изображениями, названиями и ценами
   - Добавьте понравившиеся товары в избранное для последующего просмотра
   - Добавьте товары в корзину, нажав на иконку плюса

3. **Проверка корзины**

   - Откройте корзину, нажав на иконку корзины в шапке
   - Проверьте список выбранных товаров и общую стоимость
   - При необходимости удалите ненужные товары

4. **Оформление заказа**
   - Нажмите кнопку "Оформить заказ" в корзине
   - _Примечание: функционал оформления заказа находится в разработке_

### Особенности работы системы

- **Реактивное обновление интерфейса:** все изменения (добавление в корзину, избранное, поиск, сортировка) отображаются мгновенно без перезагрузки страницы

- **Автоматическая синхронизация:** избранное синхронизируется с сервером при каждой загрузке страницы

- **Клиентское хранение корзины:** корзина хранится только в браузере и очищается при обновлении страницы

- **Оптимизация производительности:** товары загружаются один раз при открытии страницы, фильтрация и сортировка выполняются на клиенте

- **Адаптивный дизайн:** интерфейс адаптируется под различные размеры экрана (рекомендуется разрешение не менее 1280×720)

### При возникновении технических проблем

1. **Сохраните screenshot ошибки** - сделайте скриншот экрана с сообщением об ошибке

2. **Запишите точное сообщение об ошибке** - скопируйте текст ошибки из консоли браузера (F12 → Console)

3. **Проверьте состояние сервисов:**

   - Убедитесь, что все Docker-контейнеры запущены: `docker compose ps`
   - Проверьте логи бэкенда: `docker compose logs backend`
   - Проверьте логи фронтенда: `docker compose logs frontend`

4. **Обратитесь к администратору системы**, предоставив следующую информацию:

   - Описание проблемы и шаги для её воспроизведения
   - Скриншот ошибки (если доступен)
   - Сообщение об ошибке из консоли браузера
   - Время возникновения ошибки
   - Используемый браузер и его версия
   - Адрес, по которому открыто приложение

5. **Частые проблемы и решения:**
   - **Товары не загружаются:** проверьте, что бэкенд доступен по адресу `http://localhost:8080`
   - **Избранное не сохраняется:** проверьте подключение к базе данных и логи бэкенда
   - **Корзина не работает:** убедитесь, что JavaScript включен в браузере
   - **Медленная работа:** проверьте загрузку сервера и сетевые соединения

Данное руководство описывает основные функции системы "Vue Shop" (bikeON) и процедуры работы с ней. Система продолжает развиваться, и в будущем возможны изменения интерфейса и добавление новых функций, таких как оформление заказов, система авторизации пользователей и история покупок. Актуальная информация о работе системы всегда доступна в документации проекта.

## Структура проекта

- `src/` - Vue.js фронтенд приложение
- `backend/` - Java Spring Boot REST API бэкенд

## Архитектура проекта

### Backend (Spring Boot)

Организация кода backend-части следует принципам многослойной архитектуры с четким разделением ответственности:

- `model/` - содержит JPA-сущности (`Item`, `Favorite`), отражающие структуру данных в базе данных. Эти классы определяют схему таблиц и обеспечивают объектно-реляционное отображение.

- `repository/` - реализует паттерн Repository для абстрагирования доступа к данным. Слой использует Spring Data JPA и инкапсулирует всю логику работы с базой данных, предоставляя стандартные CRUD-операции.

- `service/` - содержит бизнес-логику приложения. Этот слой обрабатывает запросы от контроллеров, применяет бизнес-правила (фильтрация, сортировка) и координирует взаимодействие с репозиториями.

- `controller/` - обрабатывает HTTP-запросы, валидирует входные данные и преобразует их в формат, понятный сервисному слою. Контроллеры возвращают данные в формате JSON и обеспечивают REST API для фронтенда.

- `config/` - содержит конфигурационные классы Spring (`CorsConfig` для настройки CORS, `DataInitializer` для инициализации начальных данных в базе).

Такое разделение обеспечивает слабую связанность компонентов и упрощает тестирование, так как каждый слой может быть протестирован изолированно. Изменения в одном слое не требуют модификации других слоев.

### Frontend (Vue 3)

Организация frontend-кода использует компонентный подход с разделением на переиспользуемые UI-компоненты:

- `components/` - содержит переиспользуемые Vue-компоненты интерфейса:

  - `Card.vue` - компонент карточки товара с отображением изображения, названия, цены и действий (добавление в корзину, избранное)
  - `CardList.vue` - компонент списка карточек товаров
  - `Header.vue` - шапка приложения с логотипом, корзиной и навигацией
  - `Drawer.vue` - боковая панель корзины для отображения выбранных товаров
  - `CartItem.vue`, `CartItemList.vue` - компоненты для отображения элементов корзины

- `assets/` - содержит глобальные стили приложения (Tailwind CSS)

- `App.vue` - корневой компонент приложения, который управляет состоянием (товары, корзина, избранное), обрабатывает взаимодействие с API через axios и координирует работу дочерних компонентов

- `main.js` - точка входа приложения, инициализирует Vue-приложение и монтирует его в DOM

Такая организация обеспечивает модульность и переиспользуемость компонентов, упрощает поддержку и расширение функциональности интерфейса.

## Требования

- Docker + Docker Compose (для быстрого старта)
- Node.js 16+, Java 17+, Maven 3.6+, PostgreSQL 12+ (только если запускаете компоненты вручную)

## Быстрый старт в Docker

1. Соберите и запустите все сервисы (фронтенд, бэкенд и PostgreSQL) в корне проекта:

   ```sh
   docker compose up --build
   ```

2. Откройте фронтенд: `http://localhost:4173`
3. Бэкенд и Swagger/REST находятся на `http://localhost:8080`
4. База данных доступна по `localhost:5432` (логин/пароль `postgres/postgres`)

Остановка и удаление контейнеров:

```sh
docker compose down
```

Данные PostgreSQL сохраняются в Docker volume `postgres_data`.

## Настройка бэкенда (ручной запуск)

1. **Настройте базу данных PostgreSQL:**

   **Вариант A: Использование Docker (Рекомендуется)**

   ```sh
   cd backend
   docker-compose up -d
   ```

   **Вариант B: Локальная установка PostgreSQL**

   - Установите PostgreSQL и создайте базу данных с именем `vueshop`
   - Обновите `backend/src/main/resources/application.properties` с вашими учетными данными

2. **Соберите и запустите Spring Boot приложение:**

   ```sh
   cd backend
   mvn spring-boot:run
   ```

   API бэкенда будет доступен по адресу `http://localhost:8080`

   Для более подробной информации см. [backend/README.md](backend/README.md)

## Настройка фронтенда (ручной запуск)

1. Установите зависимости:

   ```sh
   npm install
   ```

2. Запустите сервер разработки:

   ```sh
   npm run dev
   ```

   Фронтенд будет доступен по адресу `http://localhost:5173` (или порт, указанный в терминале)

## Запуск полного приложения вручную

1. Запустите PostgreSQL (через локальную установку или `backend/docker-compose.yml`)
2. Запустите бэкенд `mvn spring-boot:run`
3. В отдельном терминале запустите фронтенд `npm run dev`
4. Откройте `http://localhost:5173`

## API Endpoints

Бэкенд предоставляет следующие REST endpoints:

- `GET /items` - Получить все товары (поддерживает параметры запроса `title` и `sortBy`)
- `GET /favorites` - Получить все избранное
- `POST /favorites` - Добавить в избранное (тело запроса: `{ "parentId": <item_id> }`)
- `DELETE /favorites/{id}` - Удалить из избранного

## Рекомендуемая настройка IDE

[VSCode](https://code.visualstudio.com/) + [Volar](https://marketplace.visualstudio.com/items?itemName=Vue.volar) (и отключите Vetur).

Для разработки на Java используйте IntelliJ IDEA или Eclipse с Spring Tools.

## Настройка конфигурации

См. [Vite Configuration Reference](https://vite.dev/config/).

## Переменные окружения

- `VITE_API_BASE_URL` — базовый URL API, используется во время сборки фронтенда (по умолчанию `http://localhost:8080`)
- `SPRING_DATASOURCE_URL`, `SPRING_DATASOURCE_USERNAME`, `SPRING_DATASOURCE_PASSWORD` — параметры подключения бэкенда к базе данных (по умолчанию `jdbc:postgresql://localhost:5432/vueshop`, `postgres`, `postgres`)

## Сборка для продакшена (ручная)

### Фронтенд

```sh
npm run build
```

### Бэкенд

```sh
cd backend
mvn clean package
java -jar target/vue-shop-backend-1.0.0.jar
```

## Линтинг

```sh
npm run lint
```
